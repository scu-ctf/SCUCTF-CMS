{% extends "base.html" %}
{% block title %}找回密码{% endblock %}
{% block css %}
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static "css/bootstrap.min.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "css/navigator.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "css/forgotpwd.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "css/mdb.min.css" %}">
{% endblock %}

<div class="container">
    <div class="col-md-4 offset-md-4" style="margin-top: 2em;">
        <!-- Material form login -->
        <div class="card">

            <h5 class="card-header elegant-color white-text text-center py-4">
                <strong>找回密码</strong>
            </h5>

            <!--Card content-->
            <div class="card-body px-lg-5 pt-0">
                {% if step == 1 %}
                    <!-- Form -->
                    <form class="text-center" method="post" style="color: #757575;" action="{% url 'CTF:login' %}">
                        {% csrf_token %}
                        <!-- Email -->
                        {{ form.non_field_errors }}

                        <div class="md-form">
                            {{ form.email }}
                            <label>{{ form.email.label }}</label>
                            {{ form.email.errors }}
                            {% if form.email.help_text %}
                                <p class="help text-small text-muted">{{ form.email.help_text|safe }}</p>
                            {% endif %}
                        </div>
                        <!-- Sign in button -->
                        <button class="btn btn-outline-elegant btn-rounded btn-block my-4 waves-effect z-depth-0"
                                type="submit">下一步
                        </button>

                    </form>
                    <!-- Form -->
                {% elif step == 2 %}
                    <form class="text-center" method="post" style="color: #757575;" action="{% url 'CTF:login' %}">
                        {% csrf_token %}
                        <!-- Email -->
                        {{ form.non_field_errors }}

                        <div class="md-form">
                            {{ form.password }}
                            <label>{{ form.password.label }}</label>
                            {{ form.password.errors }}
                            {% if form.password.help_text %}
                                <p class="help text-small text-muted">{{ form.password.help_text|safe }}</p>
                            {% endif %}
                        </div>
                        <div class="md-form">
                            {{ form.repeat_password }}
                            <label>{{ form.repeat_password.label }}</label>
                            {{ form.repeat_password.errors }}
                            {% if form.repeat_password.help_text %}
                                <p class="help text-small text-muted">{{ form.repeat_password.help_text|safe }}</p>
                            {% endif %}
                        </div>
                        <!-- Sign in button -->
                        <button class="btn btn-outline-elegant btn-rounded btn-block my-4 waves-effect z-depth-0"
                                type="submit">下一步
                        </button>
                    </form>
                {% elif step == 3 %}
                    <p class="card-text">恭喜您，密码修改成功！</p>
                {% endif %}
            </div>

        </div>
        <!-- Material form login -->
    </div>
</div>

{% block script %}
    <script src="{% static "js/popper.min.js" %}"></script>
    <script src="{% static "js/bootstrap.min.js" %}"></script>
    <script src="{% static "js/navigator.js" %}"></script>
    <script src="{% static "js/mdb.min.js" %}"></script>
{% endblock %}